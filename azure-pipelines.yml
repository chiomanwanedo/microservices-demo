trigger:
  branches:
    include:
      - main

parameters:
  - name: services
    type: object
    default:
      - adservice
      - cartservice
      - checkoutservice
      - currencyservice
      - emailservice
      - frontend
      - paymentservice
      - productcatalogservice
      - recommendationservice
      - shippingservice

stages:
  - stage: Build
    jobs:
      - job: BuildJob
        pool:
          name: 'Default'
        steps:
          - checkout: self

          # âœ… Correct use of the loop with the dash to prevent the mapping error
          - ${{ each service in parameters.services }}:
              - script: echo "Building microservice: ${{ service }}"
                displayName: 'Print ${{ service }}'
